plugins {
    id "com.avast.gradle.docker-compose" version "0.17.6"
}

wrapper{
   gradleVersion = '8.9' //version required
}

dockerCompose {
    useDockerComposeV2 = true
    useComposeFiles = ["docker-compose.yaml"]
    projectName = "notex"
}

composeUp.mustRunAfter "composeDown","backend:war","frontend:npmRunBuild"

task deployBackend {
    dependsOn = ["composeDown","backend:war","composeUp"]
}

task deployFrontend {
    dependsOn = ["composeDown","frontend:npmRunBuild","composeUp"]
}

task deploy {
    dependsOn = ["composeDown","backend:war","frontend:npmRunBuild","composeUp"]
}
